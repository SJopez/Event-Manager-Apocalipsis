# Define un contenedor general con scroll vertical (al estar dentro de un ScrollView)
<EditableAdventure>:
    padding: 20, 0, 0, 0
    size_hint_y: None
    height: 1160
    orientation: "vertical"
    spacing: 8

    # Etiqueta para el campo de nombre
    Label: 
        markup: True
        text: "[b] Nombre de la aventura:[/b]"
        font_size: 22
        size_hint: None, None
        size: self.texture_size
    
    # Campo de texto para ingresar el nombre
    NameAdventure:
        background_color: 0, 0, 0, 0
        cursor_color: 1, 1, 1, 1
        foreground_color: 1, 1, 1, 1
        size_hint: None, None
        text_size: self.width - 50, 36
        size: (400, 36)
        font_size: 18
        hovered: False
        hint_text: "Elige un nombre"
        multiline: False
        id: name
        # Línea inferior decorativa
        canvas.after:
            Color: 
                rgba: 1, 1, 1, 1
            Line:
                points: (self.x, self.y + 4, 400, self.y + 4)
                width: 1
    
    # Etiqueta para la descripción
    Label: 
        markup: True
        text: "[b] Descripcion:[/b]"
        font_size: 22
        size_hint: None, None
        size: self.texture_size

    # Campo de texto multilínea para la descripción
    Description:
        size_hint: None, None
        size: 420, 150
        text_size: self.width - 20, None
        halign: "left"
        markup: 0
        font_size: 18
        index: 0
        id: description
        background_color: 0, 0, 0, 0
        cursor_color: 1, 1, 1, 1
        foreground_color: 1, 1, 1, 1
        hint_text: "Describe tu aventura"

        # Borde redondeado decorativo
        canvas.after:
            Color:
                rgba: 1, 1, 1, 1
            Line:
                rounded_rectangle: (self.x, self.y, self.width, self.height, 12)
                width: 1    

    # Etiqueta para el tipo de aventura
    Label: 
        markup: True
        text: "[b] Tipo de aventura:[/b]"
        font_size: 22
        size_hint: None, None
        size: self.texture_size

    # Selector (Spinner) para el tipo de aventura
    TypeAdventure:
        id: type
        size_hint: None, None
        size: (200, 40)
        values: ["Defensa", "Refugio", "Supervivencia"]
        font_size: 16
        text: "Defensa"
        background_color: 0, 0, 0, 0
        # Fondo y borde redondeado
        canvas.before:
            Color:
                rgba: (0.18, 0.18, 0.18, 0.85)
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [12]

        canvas.after:
            Color:
                rgba: 1, 1, 1, 1
            Line:
                rounded_rectangle: (self.x, self.y, self.width, self.height, 12)
                width: 1.1

    # Etiqueta para el nivel de peligro
    Label: 
        markup: True
        text: "[b] Peligro: [/b]"
        font_size: 22
        size_hint: None, None
        size: self.texture_size

    # Selector (Spinner) del mismo tipo que el anterior para el nivel de peligro
    TypeAdventure:
        id: danger
        size_hint: None, None
        size: (200, 40)
        values: ["Pan comido", "Vigila tus espaldas", "Huele a peligro", "Sal corriendo", "Muerte segura"]
        font_size: 16
        text: "Pan comido"
        background_color: 0, 0, 0, 0
        # Fondo y borde redondeado
        canvas.before:
            Color:
                rgba: (0.18, 0.18, 0.18, 0.85)
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [12]

        canvas.after:
            Color:
                rgba: 1, 1, 1, 1
            Line:
                rounded_rectangle: (self.x, self.y, self.width, self.height, 12)
                width: 1.1

    # Etiqueta para la ubicación
    Label: 
        markup: True
        text: "[b] Ubicacion: [/b]"
        font_size: 22
        size_hint: None, None
        size: self.texture_size
    
    # Selector (Spinner) para la ubicación
    PlaceSelection:
        id: place
        size_hint: None, None
        size: (260, 40)
        values: ['Interior del refugio', 'Supermercados WaltMart', 'Fronteras de la ciudad', 'Modulo de purificacion', 'Vecindario del refugio', 'Refugios Infectados', 'Bunker militar del sur', 'Carreteras cercanas al refugio', 'Cuarto de armamento', 'Perimetro del refugio', 'Torres de iluminacion K3', 'Hospital abandonado', 'Cementerio de autos', 'Patio exterior', 'Alrededores del refugio', 'Area 0 de infeccion']
        font_size: 16
        text: "Interior del refugio"
        background_color: 0, 0, 0, 0
        # Fondo y borde redondeado
        canvas.before:
            Color:
                rgba: (0.18, 0.18, 0.18, 0.85)
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [12]

        canvas.after:
            Color:
                rgba: 1, 1, 1, 1
            Line:
                rounded_rectangle: (self.x, self.y, self.width, self.height, 12)
                width: 1.1
    
    # Etiqueta que da inicio a la sección de selección de imagen
    Label: 
        markup: True
        text: "[b] Imagen de la aventura: [/b]"
        font_size: 22
        size_hint: None, None
        size: self.texture_size
    
    # Imagen de la aventura
    AdventureImage:
        size_hint: None, None
        source: "assets/event_running_images/example.png"
        size: (320, 320)

    # Contenedor para la ruta de la imagen y el botón de selección
    BoxLayout:
        spacing: 8
        size_hint_y: None
        height: 40
        PathImage:
            size_hint: None, None
            font_size: 15
            size: (320, 30)
            text_size: (400, 30)
            pos_hint: {'x': 0, 'center_y': .5}
            foreground_color: (1, 1, 1, 1)
            background_color: (0.12, 0.12, 0.12, 1)
            cursor_color: (1, 1, 1, 1)
            padding: 6
            text: "assets/event_running_images/example.png"
            # Borde decorativo redondeado
            canvas.after:
                Color:
                    rgba: 1, 1, 1, 1
                Line:
                    rounded_rectangle: (self.x, self.y, self.width, self.height, 12)
                    width: 1.01  
        # Boton de seleccion de ruta para la imagen
        SelectImage:
            size_hint: None, None
            pos_hint: {'x': 0, 'center_y': .5}
            size: (90, 30)
            markup: True
            text: "[b] Seleccionar [/b]"
            padding: 10
    
    # Sección de selección de fecha
    Label:
        index: 0
        markup: True
        text: "[b] Fecha de la aventura: [/b]"
        font_size: 24
        size_hint: None, None
        size: self.texture_size 

    # Botones para abrir el calendario (Inicio y Fin)
    BoxLayout:
        size_hint: None, None
        height: 30
        pos_hint: {'x': 0.01, 'y': 0}
        DateIniButton:
            font_size: 20
            text: "Inicio"
            size_hint: None, None
            size: self.texture_size 
            padding: 4
        Label:
            text: "-"
            size_hint: None, None
            pos_hint: {'center_x': .5, "center_y": .5}
            width: 40
        DateEndButton:
            font_size: 20
            text: "Final"
            size_hint: None, None
            size: self.texture_size
            padding: 4
    
    # Etiquetas que muestran las fechas seleccionadas
    BoxLayout:
        size_hint: None, None
        pos_hint: {'x': 0.01, 'y': 0}
        height: 30
        Date:
            id: dateini
            font_size: 20
            text: "No seleccionado!"
            size_hint: None, None
            size: self.texture_size 
            padding: 4
        Label:
            text: "-"
            size_hint: None, None
            pos_hint: {'center_x': .5, "center_y": .5}
            width: 40
        Date:
            id: datend
            font_size: 20
            text: "No seleccionado!"
            size_hint: None, None
            size: self.texture_size
            padding: 4
    
    # Sección de selección de horario
    Label:
        index: 0
        markup: True
        text: "[b] Horario de inicio - fin: [/b]"
        font_size: 24
        size_hint: None, None
        size: self.texture_size 
    
    # Inputs para hora de inicio y fin (HH:MM - HH:MM)
    BoxLayout:
        size_hint: None, None
        pos_hint: {'x': 0.01, 'y': 0}
        height: 30
        # Hora inicio
        TimeInput:
            id: hourIni
            name: "ini"
            text: "00"
            size_hint: None, None    
            size: (30, 30)
            max_text_length: 20
            multiline: False
        Label:
            text: ":"
            size_hint: None, None
            pos_hint: {'center_x': .5, "center_y": .5}
            width: 20
        # Minuto inicio
        TimeInput:
            id: minuIni
            name: "ini"
            text: "00"
            size_hint: None, None    
            size: (30, 30)
            max_text_length: 20
            multiline: False
        Label:
            text: "-"
            size_hint: None, None
            pos_hint: {'center_x': .5, "center_y": .5}
            width: 40
        # Hora fin
        TimeInput:
            id: hourEnd
            name: "end"
            text: "00"
            size_hint: None, None    
            size: (30, 30)
            max_text_length: 20
            multiline: False
        Label:
            text: ":"
            size_hint: None, None
            pos_hint: {'center_x': .5, "center_y": .5}
            width: 20
        # Minuto fin
        TimeInput:
            id: minuEnd
            name: "end"
            text: "00"
            size_hint: None, None    
            size: (30, 30)
            max_text_length: 20
            multiline: False
    
    # Nota informativa sobre el formato de hora
    Label:
        index: 0
        markup: True
        text: "[b]Nota:[/b] Los horarios se interpretan en el formato de de 24 horas!"
        font_size: 16
        size_hint: None, None
        pos_hint: {'x': 0.01, 'y': 0}
        size: self.texture_size
        color: 1, 1, 1, 0.8
        padding: 0, 10, 0, 0 

    Label:
        index: 0
